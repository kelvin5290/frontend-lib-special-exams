{"version":3,"file":"SubmittedTimedExamInstructions.js","names":["_react","_interopRequireWildcard","require","_reactRedux","_i18n","_data","_paragon","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","minLen","_arrayLikeToArray","toString","slice","constructor","name","from","test","len","arr2","r","l","t","u","a","push","SubmittedTimedExamInstructions","_useSelector","useSelector","state","specialExams","timeIsOver","exam","progress","_useState","useState","_useState2","timeLeft","setTimeLeft","_useState3","_useState4","isPass","setIspass","dispatch","useDispatch","console","log","useEffect","section_scores","_iterator","_step","section","_iterator2","subsections","_step2","subsection","block_key","content_id","_progress$grading_pol","percent_graded","grading_policy","grade_range","pass","getExamAttemptsData","courseId","timer","setTimeout","clearTimeout","jsx","className","children","jsxs","Fragment","FormattedMessage","id","defaultMessage","style","width","concat","role","attempt","Button","variant","onClick","window","location","reload","_default","exports"],"sources":["../../../src/instructions/timed_exam/SubmittedTimedExamInstructions.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { FormattedMessage } from \"@edx/frontend-platform/i18n\";\nimport { getExamAttemptsData } from \"../../data\";\nimport { Button } from \"@openedx/paragon\";\nconst SubmittedTimedExamInstructions = () => {\n  const { timeIsOver, exam, progress } = useSelector(\n    (state) => state.specialExams\n  );\n  const [timeLeft, setTimeLeft] = useState(5);\n  const [isPass, setIspass] = useState(false);\n  const dispatch = useDispatch();\n  console.log(progress);\n  console.log(exam);\n\n\n\n  useEffect(() => {\n    if (timeLeft === 0) {\n      // Countdown has reached zero, do something\n      console.log(\"Countdown finished!\");\n      if (progress?.section_scores) {\n        for (const section of progress?.section_scores) {\n          for (const subsection of section.subsections) {\n            if (subsection.block_key === exam.content_id) {\n              setIspass(\n                subsection.percent_graded >\n                  (progress?.grading_policy?.grade_range?.pass || 0.7)\n              );\n              console.log(\"isPass\", isPass);\n              break;\n            }\n          }\n        }\n      }\n      if (!isPass) {\n        dispatch(getExamAttemptsData(exam.courseId, exam.content_id));\n      }\n      return;\n    }\n\n    const timer = setTimeout(() => {\n      setTimeLeft(timeLeft - 1);\n    }, 500);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [timeLeft]);\n\n  return (\n    <h3 className=\"h3\" data-testid=\"exam.submittedExamInstructions.title\">\n      {timeLeft > 0 ? (\n        <>\n          <FormattedMessage\n            id=\"exam.submittedExamInstructions.title\"\n            defaultMessage=\"Your final score is calculating, please wait for your result and do not close this page.\"\n          />\n          <div class=\"progress\">\n            <div\n              style={{ width: `${(5 - timeLeft) * 10}%` }}\n              class=\"progress-bar\"\n              role=\"progressbar\"\n              aria-valuenow={(5 - timeLeft) * 10}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            ></div>\n          </div>\n        </>\n      ) : isPass ? (\n        <FormattedMessage\n          id=\"exam.submittedExamInstructions.pass\"\n          defaultMessage=\"Congratulations! You've passed the exam.\"\n        />\n      ) : (\n        <>\n          <FormattedMessage\n            id=\"exam.submittedExamInstructions.fail\"\n            defaultMessage=\"Unfortunately, you did not pass the exam. Please note that retaking the exam may be necessary based on your organization policy.\"\n          />\n          {!exam?.attempt && (\n            <Button\n              variant=\"outline-primary\"\n              onClick={() => window.location.reload()}\n              data-testid=\"continue-exam-button\"\n            >\n              <FormattedMessage\n                id=\"exam.submittedExamInstructions.retake\"\n                defaultMessage=\"Retake Exam\"\n              />\n            </Button>\n          )}\n        </>\n      )}\n    </h3>\n  );\n};\n\nexport default SubmittedTimedExamInstructions;\n"],"mappings":"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"}