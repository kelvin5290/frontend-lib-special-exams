{"version":3,"file":"SubmittedTimedExamInstructions.js","names":["_react","_interopRequireDefault","require","_reactRedux","_i18n","_jsxRuntime","obj","__esModule","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","r","l","t","Symbol","iterator","e","n","u","a","f","o","call","next","Object","done","push","value","length","Array","isArray","_createForOfIteratorHelper","allowArrayLike","it","F","s","_e","normalCompletion","didErr","err","step","_e2","minLen","_arrayLikeToArray","prototype","toString","slice","constructor","name","from","test","len","arr2","SubmittedTimedExamInstructions","_useSelector","useSelector","state","specialExams","timeIsOver","_useSelector2","exam","progress","content_id","isPass","console","log","_iterator","section_scores","_step","section","_iterator2","subsections","_step2","subsection","block_key","targetBlockKey","_progress$grading_pol","percent_graded","grading_policy","grade_range","pass","_useState","useState","_useState2","timeLeft","setTimeLeft","useEffect","timer","setTimeout","clearTimeout","jsx","className","children","jsxs","Fragment","FormattedMessage","id","defaultMessage","style","width","concat","role","_default","exports"],"sources":["../../../src/instructions/timed_exam/SubmittedTimedExamInstructions.jsx"],"sourcesContent":["import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { FormattedMessage } from \"@edx/frontend-platform/i18n\";\n\nconst SubmittedTimedExamInstructions = () => {\n  const { timeIsOver } = useSelector((state) => state.specialExams);\n  const { exam } = useSelector((state) => state.specialExams);\n  const { progress, content_id } = exam;\n  let isPass = false;\n  console.log(progress);\n  console.log(content_id);\n  for (const section of progress?.section_scores) {\n    for (const subsection of section.subsections) {\n      if (subsection.block_key === targetBlockKey) {\n        isPass =\n          subsection.percent_graded >\n          (progress?.grading_policy?.grade_range?.pass || 0.7);\n        console.log(\"isPass\", isPass);\n        break;\n      }\n    }\n  }\n  const [timeLeft, setTimeLeft] = useState(10);\n\n  useEffect(() => {\n    if (timeLeft === 0) {\n      // Countdown has reached zero, do something\n      console.log(\"Countdown finished!\");\n      return;\n    }\n\n    const timer = setTimeout(() => {\n      setTimeLeft(timeLeft - 1);\n    }, 1000);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [timeLeft]);\n\n  return (\n    <h3 className=\"h3\" data-testid=\"exam.submittedExamInstructions.title\">\n      {timeLeft > 0 ? (\n        <>\n          <FormattedMessage\n            id=\"exam.submittedExamInstructions.title\"\n            defaultMessage=\"Your final score is calculating, please wait for your result and do not close this page.\"\n          />\n          <div class=\"progress\">\n            <div\n              style={{ width: `${(10 - timeLeft) * 10}%` }}\n              class=\"progress-bar\"\n              role=\"progressbar\"\n              aria-valuenow={(10-timeLeft) *10}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            ></div>\n          </div>\n        </>\n      ) : isPass ? (\n        <FormattedMessage\n          id=\"exam.submittedExamInstructions.pass\"\n          defaultMessage=\"Congratulations! You've passed the exam.\"\n        />\n      ) : (\n        <FormattedMessage\n          id=\"exam.submittedExamInstructions.fail\"\n          defaultMessage=\"Unfortunately, you did not pass the exam. Please note that retaking the exam may be necessary based on your organization policy.\"\n        />\n      )}\n    </h3>\n  );\n};\n\nexport default SubmittedTimedExamInstructions;\n"],"mappings":"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"}